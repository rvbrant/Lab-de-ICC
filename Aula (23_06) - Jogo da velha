#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int k = 1;
int *ponteiro = &k;


void Numeros(char TabelaJogo[3][3], int jogador){
	int n1, n2;

	if(jogador==3){
		*ponteiro = 1;
		Numeros(TabelaJogo, 1);
	}
	else{

		if(jogador == 1){
			printf("\nVez do Jogador 1\n");
			n1 = (rand() % 10);
			n2 = (rand() % 10);
			Perguntas(n1, n2, TabelaJogo, jogador);
		}
		if(jogador == 2){
			printf("\nVez do Jogador 2\n");
			n1 = (rand() % 10);
			n2 = (rand() % 10);
			Perguntas(n1, n2, TabelaJogo, jogador);
		}
	}
	
	
	
}

void Perguntas(int n1, int n2, char TabelaJogo[3][3], int jogador){
	//faz uma pergunta os com valores aleatórios
	//pergunta é de acordo com outra função random
	int k = (rand() % 3);
	int resposta, r;
	
	if(k==0){
		resposta = n1+n2;
		printf("\n\nQuanto vale %d + %d = ?", n1, n2);
		scanf("%d", &r);
		if(r == resposta){
			printf("Acertou!\n");
			Acerto(TabelaJogo, jogador);
		}
		else{
			printf("Errou!\n");
			*ponteiro = k + 1;
			Numeros(TabelaJogo, jogador+1);
		}
	}
	
	if(k==1){
		resposta = n1-n2;
		printf("\n\nQuanto vale %d - %d = ?", n1, n2);
		scanf("%d", &r);
		if(r == resposta){
			printf("Acertou!\n");
			Acerto(TabelaJogo, jogador);
		}
		else{
			printf("Errou!\n");
			*ponteiro = k + 1;
			Numeros(TabelaJogo, jogador+1);
		}
	}	
	
	if(k==2){
		resposta = n1*n2;
		printf("\n\nQuanto vale %d x %d = ?", n1, n2);
		scanf("%d", &r);
		if(r == resposta){
			printf("Acertou!\n");
			Acerto(TabelaJogo, jogador);
		}
		else{
			printf("Errou!\n");
			*ponteiro = k + 1;
			Numeros(TabelaJogo, jogador+1);
		}
	}
}

void Acerto(char TabelaJogo[3][3], int jogador){
	//permite colocar um X ou um O em uma matriz
	int Linha, Coluna;
	printf("\nEscolha uma linha: ");
	scanf("%d", &Linha);
	printf("\nEscolha uma coluna: ");
	scanf("%d", &Coluna);
	
	if(jogador==1){
		TabelaJogo[Linha][Coluna] = 'X';
	}

	if(jogador==2){
		TabelaJogo[Linha][Coluna] = 'O';
	}


	MostrarJogo(TabelaJogo);
}



void MostrarJogo(char TabelaJogo[3][3]){
	
//mostra situacao atual do jogo
	int i, j;

	printf("\n\n");
	for(i=0; i<20; i++){
		printf("*");
	}
	printf("\nJOGO DA VELHA:\n");
	for(i=0; i<20; i++){
		printf("*");
	}
	printf("\n");
	*ponteiro = k + 1;
	for(i=0; i<3; i++){
		for(j=0; j<3; j++){
			printf("%c ", TabelaJogo[i][j]);
		}
		printf("\n\n");
	}
	
//volta às perguntas
	Numeros(TabelaJogo, k);
	
}

void FimJogo(char TabelaJogo, jogador){
	//AQUI ENTRAR AS CONDIÇÕES DE FIM DE JOGO
}


int main(){
	srand(time(NULL));
	char TabelaJogo[3][3];
	int i, j;
	printf("\n");
	for(i=0; i<20; i++){
		printf("*");
	}
	
	printf("\n\nJOGO DA VELHA:\n\n");
	
	for(i=0; i<20; i++){
		printf("*");
	}
	
	printf("\nComo jogar: \n-O programa perguntara o resultado de uma operacao matematica entre dois numeros \n-O jogador tem 10s para dizer a resposta \n-Caso o jogador acerte, tem direito a uma jogada no jogo da velha");
	
	printf("\n\nInicio do jogo:\n\n");
	Numeros(TabelaJogo, 1);
	return 0;
}
